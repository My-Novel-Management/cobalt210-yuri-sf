# -*- coding: utf-8 -*-
'''
Stage: "stage name"
'''
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
from storybuilder.builder.world import World


## scenes
def fishes(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("水槽の魚たち",
            w.change_stage("Aquarium"),
            luna.be("目の前の水槽を泳ぐメダカを眺めている"),
            yoko.come("そこにドアを開けて入ってくる生徒"),
            yoko.talk("$luna、またここにいる",
                "先生が探してたわよ"),
            luna.talk("$yoko",
                "一時間くらいサボったって死ぬことはないよ"),
            yoko.talk("そういう問題じゃないのよ",
                "将来のために今勉強しておくのは大事なのよ"),
            luna.do("委員長を務める彼女は真面目だからというよりも、本気で$Sのことを考えてくれている",
                "いつも迷惑をかけているのは分かっていたけれど、そうでもしないと、彼女を独占できない"),
            luna.do("彼女は忙しい人なのだ"),
            luna.talk("ねえ、$yokoはどう思う"),
            luna.do("前の前で泳ぐメダカは水質を見るための犠牲だ",
                "自分たちもこれと同じで、何も知らないまま社会の何かの実験につきあわされているだけかも知れない"),
            luna.think("いつも考える",
                "みんな何も考えてないと"),
            yoko.talk("そういう$lunaは今目の前にある一番の問題から逃げてるだけじゃないの？"),
            luna.talk("一番の問題って何？"),
            yoko.talk("学生の本分は勉強よ",
                "それから進路ね",
                "漫然と次のステップとしての大学、それも自分の学力で行けそうなところを選ぶのではなくて、",
                "その先まで見通して掴みに行くくらいの気概がないと"),
            luna.do("彼女はいつも自信に満ちている",
                "防護スーツ越しにも容姿や体型の良さが分かる"),
            luna.do("自分は全然ダメだ",
                "何をしてもダメ"),
            luna.do("先のことなんて考えられない"),
            luna.do("そんなフリをして彼女に心配してもらうのが、今の一番の関心事だとは彼女は理解できない"),
            luna.think("成績の良さとは関係ないのだと、中学の頃に知った"),
            luna.talk("$meたちなんてこのメダカと同じだよ",
                "用済みになったらまた別の新しいメダカと取り替えられるだけ",
                "社会なんてこの水槽みたいなもんじゃないかな"),
            yoko.talk("なら$meはその水槽がいらない社会を作ってみせるわ"),
            luna.talk("どうやって？"),
            yoko.do("$Sは自分の端末を見せる"),
            luna.do("そこには$Sが見たこともないような難しい電子書籍が並んでいた"),
            yoko.talk("$meは本気で考えてるの",
                "弟たちやもっと未来の、それこそ自分たちの孫やもっともっと先の子孫たちがこんな風に防護スーツなんて着なくても生きられる世界を"),
            luna.think("初めて耳にした彼女の理想に感銘を受ける"),
            luna.talk("わかった",
                "教室に戻る"),
            yoko.talk("ありがとう"),
            luna.do("$yokoの笑顔に体温が上昇した"),
            )


def absent(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("サボり",
            w.change_stage("Aquarium"),
            luna.be("ぼんやりとメダカを眺めている"),
            yoko.come("ドアが開いて入ってくる$S"),
            yoko.talk("また、ここだったのね",
                "どうして？"),
            luna.talk("$yoko", "別に理由は、ないよ"),
            yoko.talk("ずっと普通に授業受けてたのに、何かあったに決まってる",
                "$meでいいなら聞くから何でも話して"),
            luna.talk("ここのメダカってさ、子ども作って自分たちを増やそうとか、思うのかな"),
            yoko.talk("遺伝子操作されてて子どもは産めないって聞いてる",
                "子ども産んだりするようになると管理が面倒だらか"),
            luna.talk("結局水質検査で死ぬか、寿命で死ぬか、ってことか",
                "メダカとしてのやりたいこととか夢とか、そんなものすらないんだろうね"),
            yoko.talk("思春期特有の思考というやつ？",
                "自分と世界が直接繋がっているような、そんな感覚に逃避したくなるの",
                "でもいつか気づくわ",
                "そんなことを考えたってちっとも意味がないんだって",
                "自分が手を伸ばせる範囲しか、世界じゃないんだもの"),
            luna.talk("触れられるものだけが、世界？"),
            yoko.talk("遥か遠くの国で苦しんでいる人がいても、結局は他人事ってことかな",
                "でもそれを考えたくなるのが思春期",
                "もう一方で友だちとか恋人とか、そういうことに没頭してそれだけが世界になっちゃうのも思春期"),
            luna.think("どうしていつもそんな大人な考え方ができるのだろうと羨ましくなるとともに、",
                "彼女が平然としているのをどこかで汚したいと思ってしまう"),
            luna.do("触れようと手を伸ばすが、防護スーツしか触れられない"),
            luna.talk("ねえ、$ln_yokoさん",
                "これ、脱がない？"),
            yoko.talk("何言ってるのよ",
                "$meたちはこれなしでは生活できないのよ？",
                "施設内はまだ管理されているから大丈夫かも知れないけど、それだって絶対とはいえないわ",
                "このスーツなしでは生きられないくらい酷い環境なの",
                "ちゃんと小学校で教わったでしょ？"),
            luna.do("そのとき、電気が消えた"),
            )


def black_out(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("停電",
            w.change_stage("Aquarium"),
            luna.be(),
            yoko.be(),
            luna.do("停電だった"),
            yoko.talk("すぐに回復すると思うけど"),
            luna.do("その声は少し震えていた"),
            luna.do("管理機能も電源がなければ動かない"),
            luna.do("非常電源に切り替わればしばらくは大丈夫かも知れないが、それだってどこまでが安全区画に指定されているのか分からない"),
            luna.talk("あっ"),
            luna.do("非常電源に切り替わり、非常灯が灯っていた"),
            luna.do("しかし空調の音はしない"),
            luna.do("入り口も開かなかった"),
            luna.do("二人で肩を寄せる"),
            yoko.talk("だ、大丈夫よ", "すぐに助けが来るわ"),
            luna.do("自分の端末を見る",
                "電波がつながっていないのが分かった"),
            yoko.talk("ダメね",
                "ただの停電じゃないのかしら"),
            luna.talk("ねえ$ln_yokoさん、ううん、$yoko"),
            yoko.talk("な、何、$ln_lunaさん？"),
            luna.talk("$yokoって、暗いところ苦手でしょ？", "あと閉所とか"),
            yoko.talk("ど、どうして？"),
            luna.talk("いつもこの部屋に入るときに一瞬構えるのよ",
                "それに図書室も奥の書架には入りたがらないじゃない"),
            yoko.talk("そうよ、悪い？",
                "小さい頃にね、大人のスーツを着せられてそれが脱げなくてずっと泣いてたのよ",
                "だから嫌なの", "本当はこんなスーツ着てたくないのよ"),
            luna.talk("ひょっとしてそれで研究者になりたいの？"),
            yoko.talk("わるい？"),
            luna.talk("ううん", "嬉しい",
                "やっと同年代だと思えた"),
            )


def out_suites(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("スーツを脱いで",
            w.change_stage("Aquarium"),
            luna.be(),
            yoko.be(),
            luna.do("けれど五分、十分しても復旧しないままだった"),
            yoko.talk("いきぐるしく、ない？"),
            luna.talk("わからないけど、ひょっとして空調とかとまってるせい？"),
            yoko.talk("どうしよう……"),
            luna.talk("助け、呼んでみる？"),
            luna.talk("誰かいますかー？"),
            luna.do("しばらくやってみたが、反応はなかった"),
            luna.do("$Sはスーツを脱ぎ始める"),
            yoko.talk("何やってるのよ！"),
            luna.talk("こっちのほうが声が通るでしょ？", "それに、息もしやすいみたいだし"),
            yoko.talk("ダメだって、そんなの"),
            luna.talk("誰も見てないしさ……$yokoも脱げば？"),
            luna.talk("そうしなよ"),
            yoko.do("しぶっていたがヘッド部分だけ脱いだ"),
            luna.talk("うわぁ"),
            luna.do("長い髪の毛がふわりと現れ、整った美形が出た"),
            luna.do("それに触れる"),
            yoko.talk("何するの"),
            luna.talk("綺麗だなって思って"),
            yoko.talk("汚いよ"),
            luna.talk("$yokoは綺麗だよ"),
            luna.do("彼女は震えている"),
            luna.do("その手をそっと自分のシャツの胸元へと当てる"),
            luna.talk("安心しない？"),
            yoko.talk("なんでこんなこと……ちょっと"),
            luna.do("押し倒してスーツを脱がす"),
            yoko.talk("ねえやめて"),
            luna.talk("やめない"),
            yoko.talk("なんで？"),
            luna.talk("ずっと、本当の$yokoが見たかったから"),
            luna.do("スーツを脱いだ彼女の体、顔、それぞれのパーツをじっくりと見る"),
            luna.do("電源が復旧した"),
            luna.talk("ね？　別に大丈夫だったでしょ"),
            yoko.talk("う、うん"),
            luna.talk("$meね、いつもここでこっそりとスーツ脱いでた",
                "ううん、ここだけじゃない",
                "外でも内緒で、脱いだりしてた",
                "でもまだ生きてるし、なんともない",
                "どうして誰も疑わないんだろうって"),
            yoko.talk("実際にデータで正常な活動ができない数値が出ているんだから、それはたまたまよ",
                "でも、そうね", "もっと$meたちは疑うべきなのかも知れない",
                "疑うことから問題認識は始まるから",
                "問題が生まれればそれに対して解決する力も生まれる"),
            luna.talk("問題とかはよく分からないけど、もっと自由に息をして歩いて、綺麗なものを見たいだけ"),
            luna.do("互いに顔を赤らめる"),
            )


def alone(w: World):
    luna = w.get("luna")
    return w.scene('空虚な水槽',
            w.change_stage("Aquarium"),
            luna.come("水質管理室に入ってくる$S"),
            luna.do("スーツを脱ぎ払い、制服を着ている"),
            luna.do("水槽にはメダカはおらず、張り紙がされていた"),
            luna.do("現在メダカはいません。新しく入荷するまではここは使えません"),
            luna.do("自分の手を見ると小さな黒ずみができていた"),
            )

