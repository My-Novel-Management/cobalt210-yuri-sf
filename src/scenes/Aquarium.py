# -*- coding: utf-8 -*-
'''
Stage: "stage name"
'''
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
from storybuilder.builder.world import World


## scenes
def fishes(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("水槽の魚たち",
            w.change_stage("Aquarium"),
            "漫画とか描いている方がいいかな",
            "あとヘッド部を外しているくらいがいい",
            luna.be("#目の前の水槽を泳ぐメダカを眺めている"),
            luna.do("淡い金色の鱗の塊の先端にぽつんと真っ黒な円形の目が付いているそれは尾びれをばたつかせてグリーンライトの照らす水槽を泳いでいた",
                "部屋は薄暗い",
                "だから水槽だけが存在しているみたいで$Mはよくここに籠もる",
                "水質管理室と表には小さなプレートが貼られているけれど誰もそんな名前で呼ばない",
                "何ならここの存在すらよく知らない",
                "設備管理を任されている事務員がときおり見に来るくらいだろう"),
            yoko.come("そう思っていたらピッと短い電子音が鳴り、ドアがスライドして開いた"),
            yoko.talk("$ln_lunaさん、またここだったのね",
                "先生が探してたわよ"),
            luna.do("声を聞かなくても、端末を向けて認識しなくても、それが委員長だとすぐに分かる",
                "外見が他の生徒と同じように白銀のボディスーツとフルフェイスでも彼女は彼女なのだ",
                "その立ち振舞いと$Mを見つけたときの安堵とどうしようもなさの入り交ぜて僅かに両肩を落とす仕草は、紛れもなく彼女だけのものだ"),
            luna.talk("$ln_yokoさん",
                "放っておいてくれればいいのに",
                "別にあなたに迷惑を掛けていないわ"),
            yoko.talk("$meまで気にしなくなったら$ln_lunaさんてどこかに消えてしまうんじゃないの？",
                "少なくとも$meにとってはね、この水槽で泳ぐ一匹のメダカくらいの価値はあるのよ"),
            luna.think("それは彼女なりに気を遣っての言葉なのだろうか",
                "$Mは防護スーツ越しに水槽に触れ、その中で泳いでいるダツ目メダカ科メダカ属の淡水魚を再度見やる"),
            luna.talk("キリーフィッシュって言うのよ、こいつら",
                "何をキルしてるんだろう"),
            luna.do("なけなしの知識を口にして自嘲する",
                "けれど$ln_yokoさんは笑うことなく真面目に「そのキリーはキル、つまり殺すって意味じゃないわ」と否定した"),
            yoko.talk("このキリーはオランダの古い言葉で小川を意味するものよ",
                "だから小川の魚と呼んでいるだけでそんな危ないものじゃないわ",
                "そもそもメダカは日本の固有種で外国にはいないのよ",
                "メダカは英語でもメダカよ"),
            luna.do("聞きかじった適当な知識に対しても手加減なしで本気で答えてくれる",
                "その情熱の矛先に自分という存在がなれているのだと感じて、何だか笑いが滲み出てしまった"),
            yoko.talk("何かおかしい？",
                "$me、間違ったことを話してしまったのかしら"),
            luna.talk("ううん",
                "たぶん$ln_yokoさんが言うのが正しいんだと思う",
                "$meはネットで適当に見て、へえ、そうなんだって思っただけだし"),
            luna.do("なら良かった、とほっとした様子を見せたのが更におかしくて、$Mは声を出して笑ってしまった"),
            yoko.talk("何なのよ？"),
            luna.do("$ln_yokoさんは困惑した様子で$Mを見ている",
                "フルフェイスの目元だけが透けているけれど表情はよく分からない",
                "その無個性なフルフェイスを取り去って彼女の顔をちゃんと確認したい衝動を抑え、$Mは「ごめんなさい」とだけ呟く"),
            luna.talk("あとでちゃんと職員室に顔を出すから、代わりに一つ質問に答えてくれませんか？"),
            yoko.talk("え、ええ", "いいわよ"),
            luna.talk("$ln_yokoさんはどう思うかな",
                "このメダカたちのことを",
                "水質に変化があればこの子たちは死んでしまう",
                "それはここで暮らす人間のための仕方がない犠牲なのかも知れないけれど、",
                "社会ってこういう誰も気にしない小さな犠牲の積み重ねの上に何とか成り立っているんだって、$meは最近感じているんだ"),
            yoko.talk("正直この設備自体には意味なんてないわ"),
            luna.do("腕組みをして壁に背をもたれさせながら彼女は言う"),
            yoko.talk("管理なら全てコンピュータが行っているわ",
                    "ここは言うなればそういったものが未整備だった頃の名残",
                    "メダカたちはね、生きていようが死んでいようがどっちでもいいのよ",
                    "ほら"),
            yoko.do("$ln_yokoはそう言うと部屋の隅に落ちていた大きな埃を拾い上げる"),
            yoko.talk("掃除すらされていない",
                    "あなたくらいなんじゃないの、この部屋を頻繁に訪れているのって",
                    "少なくとも$meはあなた以外の誰かがここに入っているのを見たことはないわ"),
            luna.do("使われていないも同然だと教えられ、$Mは力が抜けたようにその場に座り込んでしまった"),
            luna.talk("考えるだけ無駄、ってことか",
                    "なんか$meたちみたいだなって思ったけど、だとしたら誰も$meたちのことなんか見てないし、気にしてもいないし、",
                    "生きてても死んでてもどうでもいいってことなんだろうね"),
            yoko.talk("そうやっていつまでも思春期特有の思考に逃げてるつもり？"),
            luna.do("かなり強めの語気だった"),
            luna.talk("逃げる？"),
            yoko.talk("だってそうでしょう？",
                    "先生の呼び出しからも、授業からも、勉強からも……ううん、もっと、今自分たちがすべきことその全部かな"),
            luna.talk("すべきことって何？"),
            yoko.talk("学生の本分は勉強よ",
                "それからあとは進路を考えることかな",
                "確かに以前に比べて平均寿命は短くなっているし選べる仕事の種類だって減ってる",
                "けどね、$meは漫然と次のステップとして自分の学力で行けそうな大学を選び、",
                "適当に割り振られるままに職に就く",
                "そんな人生を送るつもりはないの"),
            luna.do("自信に満ちた言葉たちだった",
                    "$Mとは全然違う",
                    "ちゃんと”生きている”と感じる彼女の意志がその端々に満ちていた",
                    "対して$Mは何一つ、先のことなんか考えていない",
                    "今だって、よく分からない息苦しさから逃れようとしているだけだ"),
            yoko.talk("ねえ、これを見て"),
            yoko.do("そう言って$ln_yokoは自分の端末を取り出して、", "&"),
            luna.do("その画面を$Mに見せた", "&"),
            luna.do("そこには見たこともないような難しいタイトルの電子書籍がずらりと並んでいた"),
            yoko.talk("誰にも話したことないから内緒にしておいてほしいんだけど、実は$me、研究者になりたいのよ"),
            luna.think("彼女の言うそれがどんな職業なのか$Mにはあまりピンとこなかったけれど「研究」という言葉の響きがとても彼女らしくて、",
                    "$Mは黙ったまま頷くと「ありがとう」という言葉に続く彼女の夢の話を聞いた"),
            yoko.talk("小さい頃からずっと感じていた",
                    "どうしてこんなスーツを着て生活しなければならないんだろうって",
                    "あれはまだ小学校に上がる前で、あちこち走り回る$meのスーツが破けちゃったのね",
                    "でもその時には子ども用のスペアがなくて",
                    "$meには大人用のそれがあてがわれたわ",
                    "すごく大きくてぶかぶかで、ヘルメットを取り付けたら真っ暗で何も見えなくなるの",
                    "けれど大人たちはそれでもう大丈夫だからって、親が来るまでそのまま三時間も放置されて",
                    "以来ずっとこのスーツのことが苦手なまま",
                    "$meの弟たちやもっと未来の、それこそ自分の子どもや孫世代にはこんな思いはしてほしくないから、",
                    "$meは防護スーツなんて着なくても生きられる世界を作りたい",
                    "その為に研究者になりたいのよ"),
            luna.think("どういう思いでそんな大切な話を自分に打ち明けてくれたのかは分からなかったけれど、",
                    "この日から$meにとって$full_yokoという存在は特別なものになった"),
            )


def absent(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("サボり",
            w.change_stage("Aquarium"),
            luna.be("#ぼんやりとメダカを眺めている"),
            yoko.come("#ドアが開いて入ってくる$S"),
            yoko.talk("またここにいた",
                "ねえどうして？",
                "最近は真面目に授業出ていたじゃない",
                "$meの話を理解してくれたんじゃなかったの？"),
            luna.do("水槽の中のメダカは二匹に減っていて、その二匹は互いを牽制するように距離を取って泳いでいる",
                "$Mはそれを見つめたまま「理解はしてるよ」とだけ返した"),
            yoko.talk("だったらどうして？",
                "こんな場所にいても何もならないよ？"),
            luna.talk("$ln_yokoさん",
                "ううん、ねえ$yoko"),
            luna.do("突然呼び捨てにしたことに「え」と驚きの声を彼女は漏らしたけれど構わずに$Mは続ける"),
            luna.talk("$yokoはどうして$meに構うの？",
                "それはあなたの夢にも学生の本分である勉強にも何も関係ないことでしょ？",
                "それなのに毎回$yokoはこうして$meを探しに来てくれる",
                "委員長だから、というのはなし",
                "それなら$me以外にももっと面倒見なきゃいけない人たくさんいるもの"),
            yoko.talk("それでも委員長だから、よ"),
            luna.do("彼女は力強く言ってから、声を上げて笑う"),
            yoko.talk("でもね、そんな義務感からじゃないの、全然",
                "笑わないでよ？"),
            luna.do("そう前置きすると彼女は$Mの隣にやってきて腰を下ろす",
                "何？　とその顔を覗き込むと「実はね」とその理由を話してくれた"),
            yoko.talk("よく似てるのよ、小学三年くらいまでの$meに"),
            luna.think("意味が分からず黙っていると「うん」と何度か自分に確認するように頷いてから、続きを話す"),
            yoko.talk("今でこそ委員長で真面目な$ln_yokoさんて認識されているけれど、小さい頃は全然そんなじゃなかったのよ",
                "前に少し話したよね、やんちゃだったって"),
            luna.think("研究者になりたいという夢を語ってくれた時のことだ"),
            yoko.talk("みんなが同じ教室に閉じ込められて同じ勉強をさせられるのがどうしても分からなくて、",
                "それが嫌でよく授業を抜け出してたの",
                "$meの隠れ家は図書室だったけれど、そこで好きな本を読んで時間を過ごしてた",
                "でもね、ある日一人の生徒が$meを探しに来てくれたんだ",
                "$meもその子に$ln_lunaさんと同じような質問をしたわ",
                "何故って",
                "そしたらその子は『ともだちだから』だって",
                "すごくシンプルで否定できないとても強力な理由だった"),
            luna.do("ともだち、そう口の中で唱えてから頷く"),
            yoko.talk("たぶんそれが別の理由でもほんとは嬉しかっただろうけど、ほとんど話したことのなかった$meを友だちって言ってくれる誰かのために何かしたいって思ったのね",
                "だからそれが$meの夢のきっかけになった",
                "研究者になることはその手段であって、今目の前で困っている友だちを放っておいてまで手に入れるものじゃないのよ"),
            luna.talk("$meは……友だち？"),
            yoko.talk("そう",
                "$meたちは、友だちよ"),
            luna.do("真っ直ぐに答えた彼女は微笑んだのだろうか",
                "フルフェイスの向こう側の表情が見たくなって右手を伸ばしたところで、一気に暗闇に落とされた"),
            )


def black_out(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("停電",
            w.change_stage("Aquarium"),
            luna.be(),
            yoko.be(),
            yoko.talk("停電ね"),
            luna.do("$yokoは落ち着いた声で言った"),
            yoko.talk("すぐに復旧すると思うけど"),
            luna.do("けれど$Mに体を寄せ、右腕を掴んでくる", "その手から僅かな震えが伝わり、$Mは大丈夫と安心させるために彼女を抱き寄せた"),
            yoko.talk("これでもだいぶ慣れたんだけどね、でもやっぱり気持ちの準備ができていない時に急にやってくる暗闇は無理みたい",
                "ごめんなさいね", "しばらくこのままいさせて"),
            luna.do("いいよ、とも、うん、とも言えないまま黙って彼女を抱く",
                "それでも白銀の薄皮一枚によって隔てられたその感触は何だか人形を脇に抱いているようにも感じてしまう"),
            luna.do("一分ほどで非常電源に切り替わった",
                "ぼんやりと入り口の上の赤いランプが灯り、それが水槽の水を不気味に照らす",
                "まだ二匹のメダカは生きているようだったけれど以前$yokoに教えてもらった通りなら、このまま電源復旧が遅れれば酸素は尽き、やがて彼らは死んでしまう"),
            luna.talk("雷でも落ちたのかな"),
            luna.do("嵐が来るとか天気が悪くなるとかそんな予報は出ていなかった",
                "けれどそれ以外に停電の原因が思いつかず、$Mは震える$yokoに対して何と言って安心させればいいのか分からなかった"),
            yoko.talk("もしこれが誰かによって意図的に停電にされたものなら、$meたちは一生このままかも知れない"),
            luna.talk("何言うのよ",
                "そんなことがあったらきっと誰かが助けに来てくれるに決まっているわ",
                "そうでしょう？"),
            luna.do("果たして本当にそうなのだろうか",
                "五分、十分経っても電源は戻らず、",
                "当然誰もドアを開けてなんてくれない"),
            luna.do("不安になった$Mはどこかに手動の開閉装置がないか探してみたけれどどこにもそれらしいものを見つけられなかった",
                "それどころか部屋が暗すぎて非常灯の周辺以外は何があるのかよく分からない"),
            yoko.talk("ねえ、$ln_lunaさん", "なんだか息苦しくない？"),
            luna.talk("そう？　$meは別に"),
            yoko.talk("ひょっとしたら空調、止まってる？"),
            luna.do("$yokoに言われて$Mは立ち上がり、手を天井の方へと向ける",
                "よく分からない",
                "でも言われてみれば風はないし機械の音もしないように思う",
                "そもそも非常電源でどのレベルの設備が維持されるのか分からないし、区画によっては完全に停止してしまうことも考えられる",
                "端末を見ると電波も繋がっていなかった",
                "完全に孤立しているのだ",
                "誰かが$Mたちがいなくなってしまったことに気づかなければ本当に一生ここから出られない可能性だってある"),
            yoko.talk("だ、大丈夫よ", "すぐに助けが来るわ"),
            luna.do("さっきと言っていることが違っている",
                "$Mは彼女のフルフェイスを掴む"),
            luna.talk("ねえ、$yoko"),
            yoko.talk("な、何、$ln_lunaさん？"),
            luna.do("怯える$yokoの顔から手を離すと、$Mは自分のヘルメットに手をやり、それを外した"),
            )


def out_suites(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("スーツを脱いで",
            w.change_stage("Aquarium"),
            luna.be(),
            yoko.be(),
            yoko.talk("何やってるのよ！"),
            luna.talk("何って、息苦しいなら取っちゃえばいいかなって"),
            yoko.talk("早くヘルメットして！",
                "もし空調が止まってて正常化機能も動いてないなら$ln_lunaさん感染してしまうのよ？"),
            luna.do("$yokoは慌てて$Mの手からヘルメットを奪おうとしたが$Mはそれを思い切りドアに投げつけてやる",
                "ヘルメットは鈍い音がして床に転がり、その白銀の表皮が非常灯で赤く照らされた"),
            luna.talk("ぜーんぜん、大丈夫だよ",
                "実は$meね、ときどきこうやってヘルメット取ってたんだ"),
            yoko.talk("なんで、そんなこと？"),
            luna.talk("だってこっちの方が楽だもん",
                "夏場なんかむれて酷いのにみんなほんとによく平気だなって思うくらい"),
            luna.do("$Mの口ぶりに$yokoは言葉を失っていた",
                "でもそんな彼女の前で今度は防護スーツまで脱ぎ始める",
                "ジッパーを下ろして胸元から左右に開き、腕を露出させ、そのまま腰まで下ろす",
                "たったそれだけのことで開放感はこの上ない",
                "$Mは脚の部分まで全部脱いでしまうと、それをくしゃっと床にまるめて置いた"),
            luna.talk("どう？"),
            yoko.talk("どうって……"),
            luna.do("$Mのスーツの下にはネットで手に入れた昔の学生服、それもセーラー服と呼ばれていたものが着られていた",
                "紺色の生地で白の襟と赤いリボンという当時であればオーソドックスなものだったけれど、そんなものを目にしたこともない彼女にはとても奇異に映ったのだろう",
                "$yokoは言葉を見つけられないまま「なに？」と口にした"),
            luna.talk("ほんとならね、$meたちってこういう制服を着て学校生活を送っていたんだよ？",
                "今の誰が誰だかよく分からないスーツよりもずっとこっちの方が可愛いって思わない？"),
            luna.do("でも、とか、けど、という言葉を声にしたけれど、$yokoはそれ以上何も言おうとしなかった",
                "こんな暗い場所じゃなかったらもっと彼女に見てもらえるのに非常灯の下に立っても$Mの姿はぼんやりとしている"),
            luna.talk("$yokoも着てみる？"),
            yoko.talk("え……"),
            luna.do("駄目とか無理とか、そういった否定の言葉は出てこない",
                "$yokoは$Mの提案を真剣に考えてくれているようだ"),
            luna.talk("まずはそれ、脱いじゃう？"),
            luna.do("$Mが彼女のヘルメットに手をやると、彼女はその手を退かして自分でヘルメットを外した",
                "長い髪の毛が生き物のように溢れ出し、整った彼女の顔の脇に垂れ下がる"),
            luna.talk("綺麗……"),
            yoko.talk("なんか、恥ずかしい"),
            luna.do("俯いて口元をぎゅっと結ぶ、その彼女の表情が薄暗い中でもはっきりと分かる"),
            luna.talk("他人に見せるのって、初めて？"),
            luna.do("こくり、と頷いた彼女に歩み寄ると、その手を胸元のジッパーに導く"),
            yoko.talk("無理", "流石にこれは"),
            luna.talk("ここまでして全然平気だったでしょ？",
                "一度くらい、自由になってみようよ",
                "$meね、ずっと思ってた",
                "$yokoって綺麗なだけじゃなくてスタイルも良くて、あんなダサいスーツよりももっと似合う服を着るべきだって"),
            yoko.talk("$meはモデルじゃないわ"),
            luna.talk("服を着る権利は何もファッションモデルだけが持ってる訳じゃない",
                "$meたちだってほんとはもっと自由でいられるのよ",
                "けど誰もそれに気づかないだけ",
                "そう思わない？"),
            luna.do("彼女は俯いたまま、それでも考え込んでいた",
                    "本当に彼女が将来実現したい世界がやってきたなら、そこには色々な服を着て楽しむ日々だって同様に待っているはずだ"),
            yoko.talk("分かった", "けど、少しだけ後ろ、向いてて"),
            luna.do("覚悟を決めた$yokoに黙って頷くと、$Mは背を向けた",
                    "ジッパーが降りる音が部屋に響く",
                    "今彼女はどんな思いでいるのだろう",
                    "普通なら自宅以外では防護スーツを脱いだりしない",
                    "$Mたちの年代なら親にも素顔を見せたりしないだろう",
                    "それが当たり前になっていた"),
            # TODO
            luna.talk("$yokoは綺麗だよ"),
            luna.do("彼女は震えている"),
            luna.do("その手をそっと自分のシャツの胸元へと当てる"),
            luna.talk("安心しない？"),
            yoko.talk("なんでこんなこと……ちょっと"),
            luna.do("押し倒してスーツを脱がす"),
            yoko.talk("ねえやめて"),
            luna.talk("やめない"),
            yoko.talk("なんで？"),
            luna.talk("ずっと、本当の$yokoが見たかったから"),
            luna.do("スーツを脱いだ彼女の体、顔、それぞれのパーツをじっくりと見る"),
            luna.do("電源が復旧した"),
            luna.talk("ね？　別に大丈夫だったでしょ"),
            yoko.talk("う、うん"),
            luna.talk("$meね、いつもここでこっそりとスーツ脱いでた",
                "ううん、ここだけじゃない",
                "外でも内緒で、脱いだりしてた",
                "でもまだ生きてるし、なんともない",
                "どうして誰も疑わないんだろうって"),
            yoko.talk("実際にデータで正常な活動ができない数値が出ているんだから、それはたまたまよ",
                "でも、そうね", "もっと$meたちは疑うべきなのかも知れない",
                "疑うことから問題認識は始まるから",
                "問題が生まれればそれに対して解決する力も生まれる"),
            luna.talk("問題とかはよく分からないけど、もっと自由に息をして歩いて、綺麗なものを見たいだけ"),
            luna.do("互いに顔を赤らめる"),
            )


def alone(w: World):
    luna = w.get("luna")
    return w.scene('空虚な水槽',
            w.change_stage("Aquarium"),
            luna.come("水質管理室に入ってくる$S"),
            luna.do("スーツを脱ぎ払い、制服を着ている"),
            luna.do("水槽にはメダカはおらず、張り紙がされていた"),
            luna.do("現在メダカはいません。新しく入荷するまではここは使えません"),
            luna.do("自分の手を見ると小さな黒ずみができていた"),
            )

