# -*- coding: utf-8 -*-
'''
Stage: "stage name"
'''
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')
from storybuilder.builder.world import World


## scenes
def fishes(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("水槽の魚たち",
            w.change_stage("Aquarium"),
            "漫画とか描いている方がいいかな",
            "あとヘッド部を外しているくらいがいい",
            luna.be("#目の前の水槽を泳ぐメダカを眺めている"),
            luna.do("淡い金色の鱗の塊の先端にぽつんと真っ黒な円形の目が付いているそれは尾びれをばたつかせてグリーンライトの照らす水槽を泳いでいた",
                "部屋は薄暗い",
                "だから水槽だけが存在しているみたいで$Mはよくここに籠もる",
                "水質管理室と表には小さなプレートが貼られているけれど誰もそんな名前で呼ばない",
                "何ならここの存在すらよく知らない",
                "設備管理を任されている事務員がときおり見に来るくらいだろう"),
            yoko.come("そう思っていたらピッと短い電子音が鳴り、ドアがスライドして開いた"),
            yoko.talk("$ln_lunaさん、またここだったのね",
                "先生が探してたわよ"),
            luna.do("声を聞かなくても、端末を向けて認識しなくても、それが委員長だとすぐに分かる",
                "外見が他の生徒と同じように白銀のボディスーツとフルフェイスでも彼女は彼女なのだ",
                "その立ち振舞いと$Mを見つけたときの安堵とどうしようもなさの入り交ぜて僅かに両肩を落とす仕草は、紛れもなく彼女だけのものだ"),
            luna.talk("$ln_yokoさん",
                "放っておいてくれればいいのに",
                "別にあなたに迷惑を掛けていないわ"),
            yoko.talk("$meまで気にしなくなったら$ln_lunaさんてどこかに消えてしまうんじゃないの？",
                "少なくとも$meにとってはね、この水槽で泳ぐ一匹のメダカくらいの価値はあるのよ"),
            luna.think("それは彼女なりに気を遣っての言葉なのだろうか",
                "$Mは防護スーツ越しに水槽に触れ、その中で泳いでいるダツ目メダカ科メダカ属の淡水魚を再度見やる"),
            luna.talk("キリーフィッシュって言うのよ、こいつら",
                "何をキルしてるんだろう"),
            luna.do("なけなしの知識を口にして自嘲する",
                "けれど$ln_yokoさんは笑うことなく真面目に「そのキリーはキル、つまり殺すって意味じゃないわ」と否定した"),
            yoko.talk("このキリーはオランダの古い言葉で小川を意味するものよ",
                "だから小川の魚と呼んでいるだけでそんな危ないものじゃないわ",
                "そもそもメダカは日本の固有種で外国にはいないのよ",
                "メダカは英語でもメダカよ"),
            luna.do("聞きかじった適当な知識に対しても手加減なしで本気で答えてくれる",
                "その情熱の矛先に自分という存在がなれているのだと感じて、何だか笑いが滲み出てしまった"),
            yoko.talk("何かおかしい？",
                "$me、間違ったことを話してしまったのかしら"),
            luna.talk("ううん",
                "たぶん$ln_yokoさんが言うのが正しいんだと思う",
                "$meはネットで適当に見て、へえ、そうなんだって思っただけだし"),
            luna.do("なら良かった、とほっとした様子を見せたのが更におかしくて、$Mは声を出して笑ってしまった"),
            yoko.talk("何なのよ？"),
            luna.do("$ln_yokoさんは困惑した様子で$Mを見ている",
                "フルフェイスの目元だけが透けているけれど表情はよく分からない",
                "その無個性なフルフェイスを取り去って彼女の顔をちゃんと確認したい衝動を抑え、$Mは「ごめんなさい」とだけ呟く"),
            luna.talk("あとでちゃんと職員室に顔を出すから、代わりに一つ質問に答えてくれませんか？"),
            yoko.talk("え、ええ", "いいわよ"),
            luna.talk("$ln_yokoさんはどう思うかな",
                "このメダカたちのことを",
                "水質に変化があればこの子たちは死んでしまう",
                "それはここで暮らす人間のための仕方がない犠牲なのかも知れないけれど、",
                "社会ってこういう誰も気にしない小さな犠牲の積み重ねの上に何とか成り立っているんだって、$meは最近感じているんだ"),
            yoko.talk("正直この設備自体には意味なんてないわ"),
            luna.do("腕組みをして壁に背をもたれさせながら彼女は言う"),
            yoko.talk("管理なら全てコンピュータが行っているわ",
                    "ここは言うなればそういったものが未整備だった頃の名残",
                    "メダカたちはね、生きていようが死んでいようがどっちでもいいのよ",
                    "ほら"),
            yoko.do("$ln_yokoはそう言うと部屋の隅に落ちていた大きな埃を拾い上げる"),
            yoko.talk("掃除すらされていない",
                    "あなたくらいなんじゃないの、この部屋を頻繁に訪れているのって",
                    "少なくとも$meはあなた以外の誰かがここに入っているのを見たことはないわ"),
            luna.do("使われていないも同然だと教えられ、$Mは力が抜けたようにその場に座り込んでしまった"),
            luna.talk("考えるだけ無駄、ってことか",
                    "なんか$meたちみたいだなって思ったけど、だとしたら誰も$meたちのことなんか見てないし、気にしてもいないし、",
                    "生きてても死んでてもどうでもいいってことなんだろうね"),
            yoko.talk("そうやっていつまでも思春期特有の思考に逃げてるつもり？"),
            luna.do("かなり強めの語気だった"),
            luna.talk("逃げる？"),
            yoko.talk("だってそうでしょう？",
                    "先生の呼び出しからも、授業からも、勉強からも……ううん、もっと、今自分たちがすべきことその全部かな"),
            luna.talk("すべきことって何？"),
            yoko.talk("学生の本分は勉強よ",
                "それからあとは進路を考えることかな",
                "確かに以前に比べて平均寿命は短くなっているし選べる仕事の種類だって減ってる",
                "けどね、$meは漫然と次のステップとして自分の学力で行けそうな大学を選び、",
                "適当に割り振られるままに職に就く",
                "そんな人生を送るつもりはないの"),
            luna.do("自信に満ちた言葉たちだった",
                    "$Mとは全然違う",
                    "ちゃんと”生きている”と感じる彼女の意志がその端々に満ちていた",
                    "対して$Mは何一つ、先のことなんか考えていない",
                    "今だって、よく分からない息苦しさから逃れようとしているだけだ"),
            yoko.talk("ねえ、これを見て"),
            yoko.do("そう言って$ln_yokoは自分の端末を取り出して、", "&"),
            luna.do("その画面を$Mに見せた", "&"),
            luna.do("そこには見たこともないような難しいタイトルの電子書籍がずらりと並んでいた"),
            yoko.talk("誰にも話したことないから内緒にしておいてほしいんだけど、実は$me、研究者になりたいのよ"),
            luna.think("彼女の言うそれがどんな職業なのか$Mにはあまりピンとこなかったけれど「研究」という言葉の響きがとても彼女らしくて、",
                    "$Mは黙ったまま頷くと「ありがとう」という言葉に続く彼女の夢の話を聞いた"),
            yoko.talk("小さい頃からずっと感じていた",
                    "どうしてこんなスーツを着て生活しなければならないんだろうって",
                    "あれはまだ小学校に上がる前で、あちこち走り回る$meのスーツが破けちゃったのね",
                    "でもその時には子ども用のスペアがなくて",
                    "$meには大人用のそれがあてがわれたわ",
                    "すごく大きくてぶかぶかで、ヘルメットを取り付けたら真っ暗で何も見えなくなるの",
                    "けれど大人たちはそれでもう大丈夫だからって、親が来るまでそのまま三時間も放置されて",
                    "以来ずっとこのスーツのことが苦手なまま",
                    "$meの弟たちやもっと未来の、それこそ自分の子どもや孫世代にはこんな思いはしてほしくないから、",
                    "$meは防護スーツなんて着なくても生きられる世界を作りたい",
                    "その為に研究者になりたいのよ"),
            luna.think("どういう思いでそんな大切な話を自分に打ち明けてくれたのかは分からなかったけれど、",
                    "この日から$meにとって$full_yokoという存在は特別なものになった"),
            )


def absent(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("サボり",
            w.change_stage("Aquarium"),
            luna.be("ぼんやりとメダカを眺めている"),
            yoko.come("ドアが開いて入ってくる$S"),
            yoko.talk("また、ここだったのね",
                "どうして？"),
            luna.talk("$yoko", "別に理由は、ないよ"),
            yoko.talk("ずっと普通に授業受けてたのに、何かあったに決まってる",
                "$meでいいなら聞くから何でも話して"),
            luna.talk("ここのメダカってさ、子ども作って自分たちを増やそうとか、思うのかな"),
            yoko.talk("遺伝子操作されてて子どもは産めないって聞いてる",
                "子ども産んだりするようになると管理が面倒だらか"),
            luna.talk("結局水質検査で死ぬか、寿命で死ぬか、ってことか",
                "メダカとしてのやりたいこととか夢とか、そんなものすらないんだろうね"),
            yoko.talk("思春期特有の思考というやつ？",
                "自分と世界が直接繋がっているような、そんな感覚に逃避したくなるの",
                "でもいつか気づくわ",
                "そんなことを考えたってちっとも意味がないんだって",
                "自分が手を伸ばせる範囲しか、世界じゃないんだもの"),
            luna.talk("触れられるものだけが、世界？"),
            yoko.talk("遥か遠くの国で苦しんでいる人がいても、結局は他人事ってことかな",
                "でもそれを考えたくなるのが思春期",
                "もう一方で友だちとか恋人とか、そういうことに没頭してそれだけが世界になっちゃうのも思春期"),
            luna.think("どうしていつもそんな大人な考え方ができるのだろうと羨ましくなるとともに、",
                "彼女が平然としているのをどこかで汚したいと思ってしまう"),
            luna.do("触れようと手を伸ばすが、防護スーツしか触れられない"),
            luna.talk("ねえ、$ln_yokoさん",
                "これ、脱がない？"),
            yoko.talk("何言ってるのよ",
                "$meたちはこれなしでは生活できないのよ？",
                "施設内はまだ管理されているから大丈夫かも知れないけど、それだって絶対とはいえないわ",
                "このスーツなしでは生きられないくらい酷い環境なの",
                "ちゃんと小学校で教わったでしょ？"),
            luna.do("そのとき、電気が消えた"),
            )


def black_out(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("停電",
            w.change_stage("Aquarium"),
            luna.be(),
            yoko.be(),
            luna.do("停電だった"),
            yoko.talk("すぐに回復すると思うけど"),
            luna.do("その声は少し震えていた"),
            luna.do("管理機能も電源がなければ動かない"),
            luna.do("非常電源に切り替わればしばらくは大丈夫かも知れないが、それだってどこまでが安全区画に指定されているのか分からない"),
            luna.talk("あっ"),
            luna.do("非常電源に切り替わり、非常灯が灯っていた"),
            luna.do("しかし空調の音はしない"),
            luna.do("入り口も開かなかった"),
            luna.do("二人で肩を寄せる"),
            yoko.talk("だ、大丈夫よ", "すぐに助けが来るわ"),
            luna.do("自分の端末を見る",
                "電波がつながっていないのが分かった"),
            yoko.talk("ダメね",
                "ただの停電じゃないのかしら"),
            luna.talk("ねえ$ln_yokoさん、ううん、$yoko"),
            yoko.talk("な、何、$ln_lunaさん？"),
            luna.talk("$yokoって、暗いところ苦手でしょ？", "あと閉所とか"),
            yoko.talk("ど、どうして？"),
            luna.talk("いつもこの部屋に入るときに一瞬構えるのよ",
                "それに図書室も奥の書架には入りたがらないじゃない"),
            yoko.talk("そうよ、悪い？",
                "小さい頃にね、大人のスーツを着せられてそれが脱げなくてずっと泣いてたのよ",
                "だから嫌なの", "本当はこんなスーツ着てたくないのよ"),
            luna.talk("ひょっとしてそれで研究者になりたいの？"),
            yoko.talk("わるい？"),
            luna.talk("ううん", "嬉しい",
                "やっと同年代だと思えた"),
            )


def out_suites(w: World):
    luna = w.get("luna")
    yoko = w.get("yoko")
    return w.scene("スーツを脱いで",
            w.change_stage("Aquarium"),
            luna.be(),
            yoko.be(),
            luna.do("けれど五分、十分しても復旧しないままだった"),
            yoko.talk("いきぐるしく、ない？"),
            luna.talk("わからないけど、ひょっとして空調とかとまってるせい？"),
            yoko.talk("どうしよう……"),
            luna.talk("助け、呼んでみる？"),
            luna.talk("誰かいますかー？"),
            luna.do("しばらくやってみたが、反応はなかった"),
            luna.do("$Sはスーツを脱ぎ始める"),
            yoko.talk("何やってるのよ！"),
            luna.talk("こっちのほうが声が通るでしょ？", "それに、息もしやすいみたいだし"),
            yoko.talk("ダメだって、そんなの"),
            luna.talk("誰も見てないしさ……$yokoも脱げば？"),
            luna.talk("そうしなよ"),
            yoko.do("しぶっていたがヘッド部分だけ脱いだ"),
            luna.talk("うわぁ"),
            luna.do("長い髪の毛がふわりと現れ、整った美形が出た"),
            luna.do("それに触れる"),
            yoko.talk("何するの"),
            luna.talk("綺麗だなって思って"),
            yoko.talk("汚いよ"),
            luna.talk("$yokoは綺麗だよ"),
            luna.do("彼女は震えている"),
            luna.do("その手をそっと自分のシャツの胸元へと当てる"),
            luna.talk("安心しない？"),
            yoko.talk("なんでこんなこと……ちょっと"),
            luna.do("押し倒してスーツを脱がす"),
            yoko.talk("ねえやめて"),
            luna.talk("やめない"),
            yoko.talk("なんで？"),
            luna.talk("ずっと、本当の$yokoが見たかったから"),
            luna.do("スーツを脱いだ彼女の体、顔、それぞれのパーツをじっくりと見る"),
            luna.do("電源が復旧した"),
            luna.talk("ね？　別に大丈夫だったでしょ"),
            yoko.talk("う、うん"),
            luna.talk("$meね、いつもここでこっそりとスーツ脱いでた",
                "ううん、ここだけじゃない",
                "外でも内緒で、脱いだりしてた",
                "でもまだ生きてるし、なんともない",
                "どうして誰も疑わないんだろうって"),
            yoko.talk("実際にデータで正常な活動ができない数値が出ているんだから、それはたまたまよ",
                "でも、そうね", "もっと$meたちは疑うべきなのかも知れない",
                "疑うことから問題認識は始まるから",
                "問題が生まれればそれに対して解決する力も生まれる"),
            luna.talk("問題とかはよく分からないけど、もっと自由に息をして歩いて、綺麗なものを見たいだけ"),
            luna.do("互いに顔を赤らめる"),
            )


def alone(w: World):
    luna = w.get("luna")
    return w.scene('空虚な水槽',
            w.change_stage("Aquarium"),
            luna.come("水質管理室に入ってくる$S"),
            luna.do("スーツを脱ぎ払い、制服を着ている"),
            luna.do("水槽にはメダカはおらず、張り紙がされていた"),
            luna.do("現在メダカはいません。新しく入荷するまではここは使えません"),
            luna.do("自分の手を見ると小さな黒ずみができていた"),
            )

